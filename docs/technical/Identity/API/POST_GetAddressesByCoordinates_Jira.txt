h1. POST –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º

h2. –¶–µ–ª—å

–ú–∞—Å—Å–æ–≤–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Dadata –∏ Multigo API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ—Å—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

h2. EndPoint

{code}
POST /internal/identity/api/v1/addresses
{code}

h2. –ó–∞–ø—Ä–æ—Å

h3. Body Parameters

||–ü–∞—Ä–∞–º–µ—Ç—Ä||–¢–∏–ø||–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å||–û–ø–∏—Å–∞–Ω–∏–µ||–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è||
|coords|array|–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ|–ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç|–ú–∞–∫—Å–∏–º—É–º: —Å–º. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] MaxCoordinatesPerRequest|
|coords[].requestId|text|–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ|–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞|UUID4 —Ñ–æ—Ä–º–∞—Ç|
|coords[].longitude|double|–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ|–î–æ–ª–≥–æ—Ç–∞ –≤ –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö –≥—Ä–∞–¥—É—Å–∞—Ö|-180.0 –¥–æ 180.0|
|coords[].latitude|double|–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ|–®–∏—Ä–æ—Ç–∞ –≤ –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö –≥—Ä–∞–¥—É—Å–∞—Ö|-90.0 –¥–æ 90.0|
|sourcesByPriority|array|–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ|–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö|[1], [2], [1,2], [2,1]|

h3. SourcesByPriority Enum

||–ó–Ω–∞—á–µ–Ω–∏–µ||–û–ø–∏—Å–∞–Ω–∏–µ||
|1|Dadata API|
|2|Multigo API|

h3. –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

{code:json}
{
  "coords": [
    {
      "requestId": "550e8400-e29b-41d4-a716-446655440001",
      "longitude": 37.6176,
      "latitude": 55.7558
    },
    {
      "requestId": "550e8400-e29b-41d4-a716-446655440002", 
      "longitude": 30.3351,
      "latitude": 59.9311
    }
  ],
  "sourcesByPriority": [1, 2]
}
{code}

h2. –û—Ç–≤–µ—Ç

h3. Response Body

||–ü–∞—Ä–∞–º–µ—Ç—Ä||–¢–∏–ø||–û–ø–∏—Å–∞–Ω–∏–µ||
|items|array|–ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –∞–¥—Ä–µ—Å–æ–≤|
|items[].requestId|text|–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–∑ –∑–∞–ø—Ä–æ—Å–∞|
|items[].longitude|double|–î–æ–ª–≥–æ—Ç–∞ –∏—Å—Ö–æ–¥–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã|
|items[].latitude|double|–®–∏—Ä–æ—Ç–∞ –∏—Å—Ö–æ–¥–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã|
|items[].fullAddress|text|–ü–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å|
|items[].details|object|–î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (null –¥–ª—è Multigo)|
|items[].error|object|–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ (–µ—Å–ª–∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã)|
|items[].error.code|text|–ö–æ–¥ –æ—à–∏–±–∫–∏|
|items[].error.message|text|–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏|
|items[].details.countryName|text|–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã|
|items[].details.postalCode|text|–ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å|
|items[].details.regionType|text|–¢–∏–ø —Ä–µ–≥–∏–æ–Ω–∞|
|items[].details.regionName|text|–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞|
|items[].details.areaType|text|–¢–∏–ø —Ä–∞–π–æ–Ω–∞|
|items[].details.areaName|text|–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–π–æ–Ω–∞|
|items[].details.subAreaType|text|–¢–∏–ø –ø–æ–¥—Ä–∞–π–æ–Ω–∞/–æ–∫—Ä—É–≥–∞|
|items[].details.subAreaName|text|–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥—Ä–∞–π–æ–Ω–∞/–æ–∫—Ä—É–≥–∞|
|items[].details.cityName|text|–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞|
|items[].details.cityDistrictType|text|–¢–∏–ø –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞|
|items[].details.cityDistrictName|text|–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞|
|items[].details.settlementType|text|–¢–∏–ø –Ω–∞—Å–µ–ª–µ–Ω–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞|
|items[].details.settlementName|text|–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞—Å–µ–ª–µ–Ω–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞|
|items[].details.streetType|text|–¢–∏–ø —É–ª–∏—Ü—ã|
|items[].details.streetName|text|–ù–∞–∑–≤–∞–Ω–∏–µ —É–ª–∏—Ü—ã|
|items[].details.houseType|text|–¢–∏–ø –¥–æ–º–∞|
|items[].details.houseNumber|text|–ù–æ–º–µ—Ä –¥–æ–º–∞|
|items[].details.blockType|text|–¢–∏–ø –∫–æ—Ä–ø—É—Å–∞/–±–ª–æ–∫–∞|
|items[].details.blockNumber|text|–ù–æ–º–µ—Ä –∫–æ—Ä–ø—É—Å–∞/–±–ª–æ–∫–∞|

h3. –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤

h4. –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç Dadata

{code:json}
{
  "items": [
    {
      "requestId": "550e8400-e29b-41d4-a716-446655440001",
      "longitude": 37.65372,
      "latitude": 55.878315,
      "fullAddress": "–≥ –ú–æ—Å–∫–≤–∞, —É–ª –°—É—Ö–æ–Ω—Å–∫–∞—è, –¥ 11",
      "error": null,
      "details": {
        "countryName": "–†–æ—Å—Å–∏—è",
        "postalCode": "127642",
        "regionType": "–≥",
        "regionName": "–ú–æ—Å–∫–≤–∞",
        "areaType": null,
        "areaName": null,
        "subAreaType": "–°–µ–≤–µ—Ä–æ-–≤–æ—Å—Ç–æ—á–Ω—ã–π",
        "subAreaName": "–°–µ–≤–µ—Ä–æ-–≤–æ—Å—Ç–æ—á–Ω—ã–π",
        "cityName": "–ú–æ—Å–∫–≤–∞",
        "cityDistrictType": null,
        "cityDistrictName": null,
        "settlementType": null,
        "settlementName": null,
        "streetType": "—É–ª",
        "streetName": "–°—É—Ö–æ–Ω—Å–∫–∞—è",
        "houseType": "–¥",
        "houseNumber": "11",
        "blockType": null,
        "blockNumber": null
      }
    }
  ]
}
{code}

h4. –û—Ç–≤–µ—Ç –æ—Ç Multigo (details = null)

{code:json}
{
  "items": [
    {
      "requestId": "550e8400-e29b-41d4-a716-446655440001",
      "longitude": 37.537543039738594,
      "latitude": 55.632409499999994,
      "fullAddress": "—É–ª–∏—Ü–∞ –û—Å—Ç—Ä–æ–≤–∏—Ç—è–Ω–æ–≤–∞, 43–ê, –ú–æ—Å–∫–≤–∞, –ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è",
      "details": null,
      "error": null
    }
  ]
}
{code}

h4. –û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

{code:json}
{
  "items": [
    {
      "requestId": "550e8400-e29b-41d4-a716-446655440001",
      "longitude": 37.6176,
      "latitude": 55.7558,
      "fullAddress": null,
      "details": null,
      "error": {
        "code": "EXTERNAL_SERVICE_UNAVAILABLE",
        "message": "–í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"
      }
    }
  ]
}
{code}

h2. –ö–æ–¥—ã –æ—à–∏–±–æ–∫

||–ö–æ–¥||–°–æ–æ–±—â–µ–Ω–∏–µ||–û–ø–∏—Å–∞–Ω–∏–µ||
|400|"–í—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–∞"|–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ sourcesByPriority|
|400|"–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è"|–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –≤ sourcesByPriority|
|400|"–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞"|–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ JSON –∏–ª–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π|
|400|"–ü—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç"|–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∏–∑ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] MaxCoordinatesPerRequest|
|500|"–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"|–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞|

h2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

{panel:title=üìã –†–∞–∑–¥–µ–ª –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤ API|borderStyle=solid|borderColor=#ccc|titleBGColor=#e3fcef|bgColor=#f4f5f7}
–í—Å–µ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –¥–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
{panel}

||–ü–∞—Ä–∞–º–µ—Ç—Ä||–ó–Ω–∞—á–µ–Ω–∏–µ||–û–ø–∏—Å–∞–Ω–∏–µ||
|*MaxCoordinatesPerRequest*|100|–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ|
|*RateLimitPerSecond*|30|–õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º|
|*DadataTimeoutMs*|5000|–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ Dadata API (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)|
|*MultigoTimeoutMs*|5000|–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ Multigo API (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)|
|*CancellationTokenTimeoutMs*|10000|–û–±—â–∏–π —Ç–∞–π–º–∞—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ —Å CancellationToken|

h2. –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

h3. UML –¥–∏–∞–≥—Ä–∞–º–º–∞

{mermaid}
sequenceDiagram
    participant Client
    participant API
    participant Dadata
    participant Multigo

    Client->>API: POST /internal/identity/api/v1/addresses
    API->>API: –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞
    
    alt sourcesByPriority = [1,2] or not specified
        par –ó–∞–ø—Ä–æ—Å—ã —Å CancellationToken
            API->>Dadata: POST geolocate/address (timeout: config)
            API->>Multigo: GET rgeocoder (timeout: config)
        end
        
        alt Dadata –æ—Ç–≤–µ—Ç–∏–ª –ø–µ—Ä–≤—ã–º
            Dadata-->>API: suggestions[]
            API->>API: Cancel Multigo request
            API-->>Client: items[] (Dadata —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
        else Multigo –æ—Ç–≤–µ—Ç–∏–ª –ø–µ—Ä–≤—ã–º
            Multigo-->>API: {data, err}
            API->>API: Cancel Dadata request
            API-->>Client: items[] (Multigo —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
        else Timeout –æ–±–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
            API-->>Client: items[] —Å error –æ–±—ä–µ–∫—Ç–∞–º–∏
        end
        
    else sourcesByPriority = [2,1]
        par –ó–∞–ø—Ä–æ—Å—ã —Å CancellationToken
            API->>Multigo: GET rgeocoder (timeout: config)
            API->>Dadata: POST geolocate/address (timeout: config)
        end
        
        alt Multigo –æ—Ç–≤–µ—Ç–∏–ª –ø–µ—Ä–≤—ã–º
            Multigo-->>API: {data, err}
            API->>API: Cancel Dadata request
            API-->>Client: items[] (Multigo —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
        else Dadata –æ—Ç–≤–µ—Ç–∏–ª –ø–µ—Ä–≤—ã–º
            Dadata-->>API: suggestions[]
            API->>API: Cancel Multigo request
            API-->>Client: items[] (Dadata —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
        else Timeout –æ–±–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
            API-->>Client: items[] —Å error –æ–±—ä–µ–∫—Ç–∞–º–∏
        end
        
    else sourcesByPriority = [1]
        API->>Dadata: POST geolocate/address (timeout: config)
        alt Dadata –æ—Ç–≤–µ—Ç–∏–ª
            Dadata-->>API: suggestions[]
            API-->>Client: items[] (—Ç–æ–ª—å–∫–æ Dadata)
        else Timeout Dadata
            API-->>Client: items[] —Å error –æ–±—ä–µ–∫—Ç–∞–º–∏
        end
        
    else sourcesByPriority = [2]
        API->>Multigo: GET rgeocoder (timeout: config)
        alt Multigo –æ—Ç–≤–µ—Ç–∏–ª
            Multigo-->>API: {data, err}
            API-->>Client: items[] (—Ç–æ–ª—å–∫–æ Multigo)
        else Timeout Multigo
            API-->>Client: items[] —Å error –æ–±—ä–µ–∫—Ç–∞–º–∏
        end
    end
{mermaid}

h3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤

h4. sourcesByPriority –Ω–µ —É–∫–∞–∑–∞–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é [1,2])
* –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º Dadata + Multigo —Å CancellationToken
* –ï—Å–ª–∏ Dadata –æ—Ç–≤–µ—Ç–∏–ª –ø–µ—Ä–≤—ã–º: –æ—Ç–º–µ–Ω—è–µ–º Multigo, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º Dadata (fullAddress + details)
* –ï—Å–ª–∏ Multigo –æ—Ç–≤–µ—Ç–∏–ª –ø–µ—Ä–≤—ã–º: –æ—Ç–º–µ–Ω—è–µ–º Dadata, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º Multigo (fullAddress, details=null)
* –ï—Å–ª–∏ –æ–±–∞ –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É —Å –æ–±—ä–µ–∫—Ç–æ–º error

h4. sourcesByPriority = [1,2]
* –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º Dadata + Multigo —Å CancellationToken
* –ï—Å–ª–∏ Dadata –æ—Ç–≤–µ—Ç–∏–ª –ø–µ—Ä–≤—ã–º: –æ—Ç–º–µ–Ω—è–µ–º Multigo, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º Dadata
* –ï—Å–ª–∏ Multigo –æ—Ç–≤–µ—Ç–∏–ª –ø–µ—Ä–≤—ã–º: –æ—Ç–º–µ–Ω—è–µ–º Dadata, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º Multigo
* –ï—Å–ª–∏ –æ–±–∞ –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É —Å –æ–±—ä–µ–∫—Ç–æ–º error

h4. sourcesByPriority = [2,1]
* –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º Multigo + Dadata —Å CancellationToken
* –ï—Å–ª–∏ Multigo –æ—Ç–≤–µ—Ç–∏–ª –ø–µ—Ä–≤—ã–º: –æ—Ç–º–µ–Ω—è–µ–º Dadata, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º Multigo (fullAddress, details=null)
* –ï—Å–ª–∏ Dadata –æ—Ç–≤–µ—Ç–∏–ª –ø–µ—Ä–≤—ã–º: –æ—Ç–º–µ–Ω—è–µ–º Multigo, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º Dadata
* –ï—Å–ª–∏ –æ–±–∞ –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É —Å –æ–±—ä–µ–∫—Ç–æ–º error

h4. sourcesByPriority = [1]
* –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ Dadata —Å CancellationToken (—Ç–∞–π–º–∞—É—Ç —Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] DadataTimeoutMs)
* –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç–∏–ª: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º Dadata
* –ï—Å–ª–∏ –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –≤ —Ç–µ—á–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É —Å –æ–±—ä–µ–∫—Ç–æ–º error

h4. sourcesByPriority = [2]
* –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ Multigo —Å CancellationToken (—Ç–∞–π–º–∞—É—Ç —Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] MultigoTimeoutMs)
* –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç–∏–ª: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º Multigo (fullAddress, details=null)
* –ï—Å–ª–∏ –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –≤ —Ç–µ—á–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É —Å –æ–±—ä–µ–∫—Ç–æ–º error

h2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API

{panel:title=–í–Ω–∏–º–∞–Ω–∏–µ|borderStyle=solid|borderColor=#ccc|titleBGColor=#f7d6c1|bgColor=#ffffce}
Dadata –∏ Multigo - –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏. –ù–∞—à –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö API —Å–æ–≥–ª–∞—Å–Ω–æ –∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
{panel}

h3. Dadata API (–≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å)

h4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ API
* URL: https://suggestions.dadata.ru/suggestions/api/4_1/rs/geolocate/address
* Method: POST
* Body: JSON —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ lat, lon
* Timeout: —Å–º. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] DadataTimeoutMs
* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Äî —Å–º. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] RateLimitPerSecond

h4. –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∫ Dadata

{code}
POST https://suggestions.dadata.ru/suggestions/api/4_1/rs/geolocate/address

{
  "lat": 55.878,
  "lon": 37.653
}
{code}

h4. –û—Ç–≤–µ—Ç –æ—Ç Dadata (–ø–æ –∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É)

{code:json}
{
  "suggestions": [
    {
      "value": "–≥ –ú–æ—Å–∫–≤–∞, —É–ª –°—É—Ö–æ–Ω—Å–∫–∞—è, –¥ 11",
      "unrestricted_value": "127642, –≥ –ú–æ—Å–∫–≤–∞, —Ä-–Ω –°–µ–≤–µ—Ä–Ω–æ–µ –ú–µ–¥–≤–µ–¥–∫–æ–≤–æ, —É–ª –°—É—Ö–æ–Ω—Å–∫–∞—è, –¥ 11",
      "data": {
        "postal_code": "127642",
        "country": "–†–æ—Å—Å–∏—è",
        "country_iso_code": "RU",
        "federal_district": "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π",
        "region_fias_id": "0c5b2444-70a0-4932-980c-b4dc0d3f02b5",
        "region_kladr_id": "7700000000000",
        "region_iso_code": "RU-MOW",
        "region_with_type": "–≥ –ú–æ—Å–∫–≤–∞",
        "region_type": "–≥",
        "region_type_full": "–≥–æ—Ä–æ–¥",
        "region": "–ú–æ—Å–∫–≤–∞",
        "area_fias_id": null,
        "area_kladr_id": null,
        "area_with_type": null,
        "area_type": null,
        "area_type_full": null,
        "area": null,
        "city_fias_id": "0c5b2444-70a0-4932-980c-b4dc0d3f02b5",
        "city_kladr_id": "7700000000000",
        "city_with_type": "–≥ –ú–æ—Å–∫–≤–∞",
        "city_type": "–≥",
        "city_type_full": "–≥–æ—Ä–æ–¥",
        "city": "–ú–æ—Å–∫–≤–∞",
        "city_area": "–°–µ–≤–µ—Ä–æ-–≤–æ—Å—Ç–æ—á–Ω—ã–π",
        "city_district_fias_id": null,
        "city_district_kladr_id": null,
        "city_district_with_type": null,
        "city_district_type": null,
        "city_district_type_full": null,
        "city_district": null,
        "settlement_fias_id": null,
        "settlement_kladr_id": null,
        "settlement_with_type": null,
        "settlement_type": null,
        "settlement_type_full": null,
        "settlement": null,
        "street_fias_id": "95dbf7fb-0dd4-4a04-8100-4f6c847564b5",
        "street_kladr_id": "77000000000283600",
        "street_with_type": "—É–ª –°—É—Ö–æ–Ω—Å–∫–∞—è",
        "street_type": "—É–ª",
        "street_type_full": "—É–ª–∏—Ü–∞",
        "street": "–°—É—Ö–æ–Ω—Å–∫–∞—è",
        "stead_fias_id": null,
        "stead_cadnum": null,
        "stead_type": null,
        "stead_type_full": null,
        "stead": null,
        "house_fias_id": "5ee84ac0-eb9a-4b42-b814-2f5f7c27c255",
        "house_kladr_id": "7700000000028360004",
        "house_cadnum": "77:02:0004008:1017",
        "house_flat_count": "105",
        "house_type": "–¥",
        "house_type_full": "–¥–æ–º",
        "house": "11",
        "block_type": null,
        "block_type_full": null,
        "block": null,
        "entrance": null,
        "floor": null,
        "flat_fias_id": null,
        "flat_cadnum": null,
        "flat_type": null,
        "flat_type_full": null,
        "flat": null,
        "flat_area": null,
        "square_meter_price": "248273",
        "flat_price": null,
        "room_fias_id": null,
        "room_cadnum": null,
        "room_type": null,
        "room_type_full": null,
        "room": null,
        "postal_box": null,
        "fias_id": "5ee84ac0-eb9a-4b42-b814-2f5f7c27c255",
        "fias_code": null,
        "fias_level": "8",
        "fias_actuality_state": "0",
        "kladr_id": "7700000000028360004",
        "geoname_id": "524901",
        "capital_marker": "0",
        "okato": "45280583000",
        "oktmo": "45362000",
        "tax_office": "7715",
        "tax_office_legal": "7715",
        "timezone": "UTC+3",
        "geo_lat": "55.878315",
        "geo_lon": "37.65372",
        "beltway_hit": "IN_MKAD",
        "beltway_distance": null,
        "metro": null,
        "divisions": null,
        "qc_geo": "0",
        "qc_complete": null,
        "qc_house": null,
        "history_values": null,
        "unparsed_parts": null,
        "source": null,
        "qc": null
      }
    }
  ]
}
{code}

h4. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ Dadata –≤ –Ω–∞—à —Ñ–æ—Ä–º–∞—Ç

||–ü–æ–ª–µ –∏–∑ –æ—Ç–≤–µ—Ç–∞ Dadata||–ù–∞—à–µ –ø–æ–ª–µ API||–û–ø–∏—Å–∞–Ω–∏–µ||
|suggestions[0].value|fullAddress|–ü–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –∫–∞–∫ –µ—Å—Ç—å|
|data.country|details.countryName|–°—Ç—Ä–∞–Ω–∞|
|data.postal_code|details.postalCode|–ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å|
|data.region_type|details.regionType|–¢–∏–ø —Ä–µ–≥–∏–æ–Ω–∞|
|data.region|details.regionName|–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞|
|data.area_type|details.areaType|–¢–∏–ø —Ä–∞–π–æ–Ω–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)|
|data.area|details.areaName|–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–π–æ–Ω–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)|
|data.city_area|details.subAreaType|–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–∫—Ä—É–≥ –≥–æ—Ä–æ–¥–∞|
|data.city_area|details.subAreaName|–ù–∞–∑–≤–∞–Ω–∏–µ –æ–∫—Ä—É–≥–∞ –≥–æ—Ä–æ–¥–∞|
|data.city|details.cityName|–ì–æ—Ä–æ–¥|
|data.city_district_type|details.cityDistrictType|–¢–∏–ø –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)|
|data.city_district|details.cityDistrictName|–ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)|
|data.settlement_type|details.settlementType|–¢–∏–ø –Ω–∞—Å–µ–ª–µ–Ω–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)|
|data.settlement|details.settlementName|–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞—Å–µ–ª–µ–Ω–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)|
|data.street_type|details.streetType|–¢–∏–ø —É–ª–∏—Ü—ã|
|data.street|details.streetName|–ù–∞–∑–≤–∞–Ω–∏–µ —É–ª–∏—Ü—ã|
|data.house_type|details.houseType|–¢–∏–ø –¥–æ–º–∞|
|data.house|details.houseNumber|–ù–æ–º–µ—Ä –¥–æ–º–∞|
|data.block_type|details.blockType|–¢–∏–ø –∫–æ—Ä–ø—É—Å–∞/–±–ª–æ–∫–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)|
|data.block|details.blockNumber|–ù–æ–º–µ—Ä –∫–æ—Ä–ø—É—Å–∞/–±–ª–æ–∫–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å null)|

h3. Multigo API (–≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å)

h4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ API
* URL: https://api7.multigo.ru/3/service/rgeocoder
* Method: GET
* Parameters: key, lat, lng
* API Key: *–°–ö–†–´–¢* (–±–µ—Ä–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
* Timeout: —Å–º. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] MultigoTimeoutMs
* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

h4. –ù–∞—à –∑–∞–ø—Ä–æ—Å –∫ Multigo

{code}
GET https://api7.multigo.ru/3/service/rgeocoder?key={API_KEY}&lat=55.63242&lng=37.537269
{code}

{panel:title=–í–Ω–∏–º–∞–Ω–∏–µ|borderStyle=solid|borderColor=#ccc|titleBGColor=#f7d6c1|bgColor=#ffffce}
–ü—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–æ–∑–º–æ–∂–Ω–∞ –æ—à–∏–±–∫–∞ {"err":2002,"errmsg":"Param [lng] is not float!"}. –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.
{panel}

h4. –û—Ç–≤–µ—Ç –æ—Ç Multigo (–ø–æ –∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É)

*–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:*

{code:json}
{
  "data": {
    "type": "p",
    "ll": [ 
      55.632409499999994,  // lat
      37.537543039738594   // lon
    ],
    "address": "—É–ª–∏—Ü–∞ –û—Å—Ç—Ä–æ–≤–∏—Ç—è–Ω–æ–≤–∞, 43–ê, –ú–æ—Å–∫–≤–∞, –ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è"
  },
  "err": 0
}
{code}

*–û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:*

{code:json}
{
  "err": 2002,
  "errmsg": "Param [lng] is not float!"
}
{code}

h4. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ Multigo –≤ –Ω–∞—à —Ñ–æ—Ä–º–∞—Ç
* –ü–æ–ª–µ data.address –∏–∑ –∏—Ö –æ—Ç–≤–µ—Ç–∞ ‚Üí –Ω–∞—à–µ –ø–æ–ª–µ fullAddress
* –ù–∞—à–µ –ø–æ–ª–µ details —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ null (—Ç.–∫. Multigo –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
* –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã data.ll[0] (lat), data.ll[1] (lng) - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º

h2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Å—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫

h3. –ü–∞—á–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

*–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã*: API –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º (Dadata –∏ Multigo) –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∏–∑ 100 –∑–∞–ø—Ä–æ—Å–æ–≤ —á–∞—Å—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å–ø–µ—à–Ω–æ–π, –∞ —á–∞—Å—Ç—å - –Ω–µ—É—Å–ø–µ—à–Ω–æ–π.

h3. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–∞—Å—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫

h4. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: –í–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö —Å –æ—à–∏–±–∫–∞–º–∏

–ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ –∑–∞–ø—Ä–æ—Å–∞:
* –£—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: —Å–æ–¥–µ—Ä–∂–∞—Ç fullAddress –∏ details (–∏–ª–∏ null –¥–ª—è Multigo)
* –ù–µ—É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: —Å–æ–¥–µ—Ä–∂–∞—Ç error –æ–±—ä–µ–∫—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

*–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:*
* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–µ—Ç –æ —Å—Ç–∞—Ç—É—Å–µ –∫–∞–∂–¥–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑–ª–∏—á–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫
* –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å –æ—Ç–≤–µ—Ç–æ–º –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

*–ü—Ä–∏–º–µ—Ä:* –ò–∑ 100 –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç Dadata –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ 80, Multigo –Ω–∞ 15 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö, 5 –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

{code:json}
{
  "items": [
    // 80 –æ–±—ä–µ–∫—Ç–æ–≤ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç Dadata (fullAddress + details)
    // 15 –æ–±—ä–µ–∫—Ç–æ–≤ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç Multigo (fullAddress, details=null)  
    // 5 –æ–±—ä–µ–∫—Ç–æ–≤ —Å error –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
  ]
}
{code}

h3. –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

h4. –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ß–∞—Å—Ç–∏—á–Ω–∞—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

*–ó–∞–ø—Ä–æ—Å:*

{code:json}
{
  "coords": [
    {"requestId": "req-001", "longitude": 37.6176, "latitude": 55.7558},
    {"requestId": "req-002", "longitude": 30.3351, "latitude": 59.9311}, 
    {"requestId": "req-003", "longitude": 39.7015, "latitude": 47.2313}
  ],
  "sourcesByPriority": [1, 2]
}
{code}

*–û—Ç–≤–µ—Ç:*

{code:json}
{
  "items": [
    {
      "requestId": "req-001",
      "longitude": 37.6176,
      "latitude": 55.7558,
      "fullAddress": "–≥ –ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª, –¥ 1",
      "details": { /* –¥–∞–Ω–Ω—ã–µ –æ—Ç Dadata */ },
      "error": null
    },
    {
      "requestId": "req-002", 
      "longitude": 30.3351,
      "latitude": 59.9311,
      "fullAddress": "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, —É–ª –ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 1",
      "details": null,
      "error": null
    },
    {
      "requestId": "req-003",
      "longitude": 39.7015,
      "latitude": 47.2313,
      "fullAddress": null,
      "details": null,
      "error": {
        "code": "EXTERNAL_SERVICE_UNAVAILABLE",
        "message": "–í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"
      }
    }
  ]
}
{code}

h4. –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª–Ω–∞—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

*–û—Ç–≤–µ—Ç:*

{code:json}
{
  "items": [
    {
      "requestId": "req-001",
      "longitude": 37.6176,
      "latitude": 55.7558,
      "fullAddress": null,
      "details": null,
      "error": {
        "code": "EXTERNAL_SERVICE_UNAVAILABLE",
        "message": "–í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"
      }
    }
  ]
}
{code}

h4. –°—Ü–µ–Ω–∞—Ä–∏–π 3: Timeout –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Å CancellationToken

–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ timeout (—Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è]):
* –£—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –¥–∞–Ω–Ω—ã–º–∏
* Timeout –∑–∞–ø—Ä–æ—Å—ã –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å error –æ–±—ä–µ–∫—Ç–æ–º
* –û–±—â–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ —Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] CancellationTokenTimeoutMs
* –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ 2 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤: –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç–∏–ª, –≤—Ç–æ—Ä–æ–π –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ CancellationToken

h2. –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏–µ–π –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ CancellationToken:

# *–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö*: –ø—Ä–æ–≤–µ—Ä–∫–∞ UUID4 —Ñ–æ—Ä–º–∞—Ç–∞ requestId, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—Å–∏–≤–∞ sourcesByPriority, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (—Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] MaxCoordinatesPerRequest)
# *–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å CancellationToken*: –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ –≤–Ω–µ—à–Ω–∏–º API Dadata –∏ Multigo —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏
# *–û—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤*: –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –æ—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫–æ –≤—Ç–æ—Ä–æ–º—É –∏—Å—Ç–æ—á–Ω–∏–∫—É —á–µ—Ä–µ–∑ CancellationToken
# *–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫*: –≤–æ–∑–≤—Ä–∞—Ç –≤—Å–µ—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–∑ –∑–∞–ø—Ä–æ—Å–∞, –≤–∫–ª—é—á–∞—è error –æ–±—ä–µ–∫—Ç—ã –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
# *–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö*: –º–∞–ø–ø–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç Dadata –≤ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç API

h2. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

h3. –û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [ ] API –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å requestId –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] MaxCoordinatesPerRequest)
- [ ] –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º —Å–æ–≥–ª–∞—Å–Ω–æ sourcesByPriority —Å CancellationToken
- [ ] –û—Ç–º–µ–Ω–∞ –≤—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- [ ] –í–æ–∑–≤—Ä–∞—Ç –≤—Å–µ—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–∑ –∑–∞–ø—Ä–æ—Å–∞, –≤–∫–ª—é—á–∞—è error –æ–±—ä–µ–∫—Ç—ã –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] –í–æ–∑–≤—Ä–∞—Ç requestId –≤ –∫–∞–∂–¥–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ –æ—Ç–≤–µ—Ç–∞

h3. –í–∞–ª–∏–¥–∞—Ü–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –≤ sourcesByPriority (—Ç–æ–ª—å–∫–æ 1,2)
- [ ] –û—à–∏–±–∫–∞ 400 –ø—Ä–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –≤ sourcesByPriority
- [ ] –û—à–∏–±–∫–∞ 400 –ø—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ requestId (–Ω–µ UUID4)
- [ ] –û—à–∏–±–∫–∞ 400 –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (—Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] MaxCoordinatesPerRequest)
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π: coords, requestId, longitude, latitude

h3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ –≤–Ω–µ—à–Ω–µ–º—É Dadata API —Å —Ç–∞–π–º–∞—É—Ç–æ–º (—Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] DadataTimeoutMs)
- [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ –≤–Ω–µ—à–Ω–µ–º—É Multigo API —Å —Ç–∞–π–º–∞—É—Ç–æ–º (—Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] MultigoTimeoutMs)
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –æ—à–∏–±–∫–∏ "Param [lng] is not float!" –æ—Ç Multigo
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–Ω–µ—à–Ω–∏—Ö API (err != 0 –æ—Ç Multigo, –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –æ—Ç Dadata)
- [ ] –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –≤–Ω–µ—à–Ω–∏—Ö API –≤ –Ω–∞—à —Ñ–æ—Ä–º–∞—Ç
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CancellationToken –¥–ª—è –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–æ–≤

h3. –û—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- [ ] –ü—Ä–∏ timeout –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤–æ–∑–≤—Ä–∞—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å error –æ–±—ä–µ–∫—Ç–æ–º
- [ ] –ü—Ä–∏ sourcesByPriority = [1] –æ–±—Ä–∞—â–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∫ –≤–Ω–µ—à–Ω–µ–º—É Dadata —Å CancellationToken
- [ ] –ü—Ä–∏ sourcesByPriority = [2] –æ–±—Ä–∞—â–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∫ –≤–Ω–µ—à–Ω–µ–º—É Multigo —Å CancellationToken
- [ ] –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ sourcesByPriority –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –æ–±–æ–∏–º –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º [1,2]
- [ ] –û–±—â–∏–π —Ç–∞–π–º–∞—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ (—Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] CancellationTokenTimeoutMs)

h3. –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

* [–õ–æ–≥–∏–∫–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ Identity|../logic.md]
* [–ü—Ä–æ–¥—É–∫—Ç–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ì–µ–æ–∫–æ–¥–µ—Ä|/docs/products/–õ–∏—á–Ω—ã–π–ö–∞–±–∏–Ω–µ—Ç/modules/–ì–µ–æ–∫–æ–¥–µ—Ä.md]

{panel:title=–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏|borderStyle=solid|borderColor=#ccc|titleBGColor=#e3fcef|bgColor=#f4f5f7}
*ID:* post-get-addresses-by-coordinates
*–ù–∞–∑–≤–∞–Ω–∏–µ:* POST –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
*–û–ø–∏—Å–∞–Ω–∏–µ:* API –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—á—Ç–æ–≤—ã–µ –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ Dadata –∏ Multigo API
*–î–∞—Ç–∞:* 2025-06-04 15:45:00
*–í–µ—Ä—Å–∏—è:* v1.0
*–°—Ç–∞—Ç—É—Å:* draft
*Feature ID:* PC-GEO-RG-001
*–¢–∏–ø:* api
*–ê–≤—Ç–æ—Ä:* AI Analyst
*–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:*
- –ú–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å RequestId –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è] MaxCoordinatesPerRequest)
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç Dadata –∏ Multigo API —Å–æ–≥–ª–∞—Å–Ω–æ SourcesByPriority —Å CancellationToken
- –û—Ç–º–µ–Ω—è–µ—Ç –≤—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ –∑–∞–ø—Ä–æ—Å–∞, –≤–∫–ª—é—á–∞—è error –æ–±—ä–µ–∫—Ç—ã –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∞–π–º–∞—É—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è|#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è]: DadataTimeoutMs, MultigoTimeoutMs, CancellationTokenTimeoutMs
{panel} 